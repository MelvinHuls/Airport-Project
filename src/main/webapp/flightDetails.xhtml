<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:r="http://xmlns.jcp.org/jsf/composite/realdolmen">

<ui:composition template="/WEB-INF/templates/template_temp.xhtml">
	<ui:define name="pageTitle">Details of flight</ui:define>
	<ui:define name="content">
		<h1>
			<p:outputLabel value="#{user['user.flightDetails.header']}" />
		</h1>

		<h:form styleClass="forms">
			<p:panelGrid styleClass="panelGrids" columns="3" layout="grid">
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.remSeatsEco']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.seatsEconomy}" />
				</h:panelGroup>
				<h:panelGroup />
				<h:panelGroup />

				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.remSeatsBuss']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.seatsBusiness}" />
				</h:panelGroup>
				<h:panelGroup />
				<h:panelGroup />

				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.remSeatsFC']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.seatsFirstClass}" />
				</h:panelGroup>
				<h:panelGroup />
				<h:panelGroup />

				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.basePriceEco']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.priceEconomy}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.marginPrice']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.customMarginPriceEconomy}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup id="discPanEco">
					<p:outputLabel value="#{user['user.flightDetails.discPrice']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.calculatePriceOneSeatEconomy()}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>


				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.basePriceBuss']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.priceBusiness}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.marginPrice']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.customMarginPriceBusiness}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup id="discPanBuss">
					<p:outputLabel value="#{user['user.flightDetails.discPrice']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.calculatePriceOneSeatBusiness()}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>


				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.basePriceFC']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.priceFirstClass}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.marginPrice']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.customMarginPriceFirstClass}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup id="discPanFC">
					<p:outputLabel value="#{user['user.flightDetails.discPrice']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.calculatePriceOneSeatFirstClass()}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>


				<p:outputLabel value="#{user['user.flightDetails.dep.airport']}" />
				<h:panelGroup>
					<p:outputLabel
						value="#{user['user.flightDetails.airport.country']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.departure.country}" />
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.airport.name']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.departure.airport}" />
				</h:panelGroup>

				<p:outputLabel value="#{user['user.flightDetails.dest.airport']}" />
				<h:panelGroup>
					<p:outputLabel
						value="#{user['user.flightDetails.airport.country']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.destination.country}" />
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.airport.name']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.destination.airport}" />
				</h:panelGroup>

				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.dep.time']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.departureTime}">
						<f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.duration']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.outwardFlight.duration}">
						<f:convertDateTime pattern="HH:mm" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup />
			</p:panelGrid>

		</h:form>

		<!--  DETAILS RETURN FLIGHT -->
		<h:form id="formReturn" styleClass="forms">
			<h3>
				<p:outputLabel
					value="#{user['user.flightDetails.header.secFlight']}"
					rendered="#{checkFlightInfoService.returnFlightSelected()}" />
			</h3>
			<p:panelGrid styleClass="panelGrids" columns="3" layout="grid"
				rendered="#{checkFlightInfoService.returnFlightSelected()}">
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.remSeatsEco']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.seatsEconomy}" />
				</h:panelGroup>
				<h:panelGroup />
				<h:panelGroup />

				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.remSeatsBuss']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.seatsBusiness}" />
				</h:panelGroup>
				<h:panelGroup />
				<h:panelGroup />

				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.remSeatsFC']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.seatsFirstClass}" />
				</h:panelGroup>
				<h:panelGroup />
				<h:panelGroup />

				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.basePriceEco']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.priceEconomy}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.marginPrice']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.customMarginPriceEconomy}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.discPrice']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.calculatePriceOneSeatEconomy()}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>


				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.basePriceBuss']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.priceBusiness}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.marginPrice']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.customMarginPriceBusiness}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.discPrice']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.calculatePriceOneSeatBusiness()}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>


				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.basePriceFC']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.priceFirstClass}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.marginPrice']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.customMarginPriceFirstClass}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.discPrice']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.calculatePriceOneSeatFirstClass()}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</h:panelGroup>


				<p:outputLabel value="#{user['user.flightDetails.dep.airport']}" />
				<h:panelGroup>
					<p:outputLabel value="Country airport:  " />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.departure.country}" />
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.airport.name']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.departure.airport}" />
				</h:panelGroup>

				<p:outputLabel value="#{user['user.flightDetails.dest.airport']}" />
				<h:panelGroup>
					<p:outputLabel
						value="#{user['user.flightDetails.airport.country']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.destination.country}" />
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.airport.name']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.destination.airport}" />
				</h:panelGroup>

				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.dep.time']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.departureTime}">
						<f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup>
					<p:outputLabel value="#{user['user.flightDetails.duration']}" />
					<p:outputLabel
						value="#{checkFlightInfoService.returnFlight.duration}">
						<f:convertDateTime pattern="HH:mm" />
					</p:outputLabel>
				</h:panelGroup>
				<h:panelGroup />
			</p:panelGrid>
		</h:form>

		<h:form id="bookFlightForm" styleClass="forms">
			<p:commandButton
				value="#{user['user.flightDetails.button.bookFlight']}"
				rendered="#{checkFlightInfoService.returnFlightNotSelected()}"
				action="booking" />
			<p:commandButton
				value="#{user['user.flightDetails.button.bookFlights']}"
				rendered="#{checkFlightInfoService.returnFlightSelected()}"
				action="booking" />
		</h:form>

		<!--  RETURN FLIGHTS  -->
		<h:form styleClass="forms"
			rendered="#{flightSearchBean.returnFlightPlanned()}"
			id="possibleReturnFlights">
			<h2>
				<p:outputLabel
					value="#{user['user.flightDetails.header.chooseReturnFlight']}"
					rendered="#{checkFlightInfoService.returnFlightNotSelected()}" />
			</h2>

			<p:dataTable
				value="#{flightSearchBean.getReturnFlights(checkFlightInfoService.outwardFlight)}"
				var="flight" id="listOfFlights" sortMode="multiple">
				<p:column headerText="#{user['user.flightDetails.totalPrice']}">
					<p:outputLabel
						value="#{flightSearchBean.calculateTotalPrice(flight)}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</p:column>

				<p:column headerText="#{user['user.flightDetails.discount']}">
					<p:outputLabel
						value="#{flightSearchBean.calculateDiscount(flight)}">
						<f:convertNumber maxFractionDigits="2" />
					</p:outputLabel>
				</p:column>

				<p:column headerText="#{user['user.flightDetails.depTime']}">
					<p:outputLabel value="#{flight.departureTime}">
						<f:convertDateTime type="both" timeStyle="short" />
					</p:outputLabel>
				</p:column>

				<p:column headerText="#{user['user.flightDetails.arrTime']}">
					<p:outputLabel value="#{flight.arrivalTime}">
						<f:convertDateTime type="both" timeStyle="short" />
					</p:outputLabel>
				</p:column>

				<p:column headerText="#{user['user.flightDetails.company']}">
					<p:outputLabel value="#{flight.company}" />
				</p:column>

				<p:column>
						<p:commandButton icon="ui-icon-arrowreturnthick-1-n"
							action="#{checkFlightInfoService.setReturnFlight(flight)}"
							update="formReturn bookFlightForm possibleReturnFlights" />
				</p:column>
			</p:dataTable>
		</h:form>
		
		<h:form>
			<p:button value="#{user['user.flightDetails.button.return']}"
				outcome="return" />
		</h:form>
	</ui:define>
</ui:composition>
</html>