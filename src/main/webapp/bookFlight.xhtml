<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:r="http://xmlns.jcp.org/jsf/composite/realdolmen">

<h:head>
	<title>Almost ready to go meet the clouds!</title>
</h:head>

<h:body>
	<h2>Choose your payment method</h2>

	<h:form>
		<p:selectOneRadio
			value="#{checkFlightInfoService.bookFlight.creditCard}">
			<p:ajax event="change" update="formA" />
			<f:selectItem itemLabel="Credit Card" itemValue="true" />
			<f:selectItem itemLabel="Endorsement" itemValue="false" />
		</p:selectOneRadio>
	</h:form>

	<h:form id="formA">
		<p:outputLabel value="Creditcard Number" />
		<p:inputText value="#{creditCardNumber}"
			rendered="#{checkFlightInfoService.bookFlight.creditCard}" />

		<p:outputLabel value="expiration date (MM/dd/yyyy)" />
		<p:inputMask value="#{expirationDate}"
			rendered="#{checkFlightInfoService.bookFlight.creditCard}"
			mask="99/99/9999">
			<f:convertDateTime pattern="MM/dd/yyyy" />
		</p:inputMask>

		<p:commandButton value="Finalize Booking"
			rendered="#{checkFlightInfoService.bookFlight.creditCard}"
			action="#{checkFlightInfoService.BookFlightCreditCard(flightSearchBean.flight.flightclass, flightSearchBean.flight.seats, creditCardNumber, expirationDate)}" />
		<p:commandButton value="Finalize Booking"
			rendered="#{not checkFlightInfoService.bookFlight.creditCard}"
			action="#{checkFlightInfoService.BookFlightEndorsement(flightSearchBean.flight.flightclass, flightSearchBean.flight.seats)}" />
	</h:form>
</h:body>
</html>
