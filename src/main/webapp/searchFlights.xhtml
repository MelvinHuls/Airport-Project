<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:r="http://xmlns.jcp.org/jsf/composite/realdolmen">

<h:head>
	<title>Flights! Get your fresh Flights here!</title>
</h:head>

<h:body>
	<h2>Search you flight using the following criteria</h2>

	<h:form id="formA">
		<p:panelGrid id="panelA" columns="2" layout="grid">
			<p:outputLabel value="Amount of seats" id="seatslabel" />
			<h:panelGroup>
				<p:inputText value="#{flightSearchBean.flight.seats}" id="seats">
					<f:convertNumber />
					<p:ajax process="@this" event="change" update="formA:seats"
						partialSubmit="true" />
				</p:inputText>
				<p:message for="seats" />
			</h:panelGroup>

			<p:outputLabel value="Traveling class" />
			<h:panelGroup>
				<p:selectOneMenu value="#{flightSearchBean.flight.flightclass}"
					id="flightclass">
					<f:selectItem itemLabel="Select Class" itemValue=""
						noSelectionOption="true" />
					<f:selectItems value="#{flightSearchBean.getFlightClasses()}" />
					<p:ajax process="@this" event="change" update="flightclass"
						partialSubmit="true" />
				</p:selectOneMenu>
				<p:message for="flightclass" />
			</h:panelGroup>

			<p:outputLabel value="Airline Company" />
			<p:selectOneMenu value="#{flightSearchBean.flight.airlineCompany}"
				id="company">
				<f:selectItem itemLabel="Select Company" itemValue=""
					noSelectionOption="true" />
				<f:selectItems value="#{flightSearchBean.getCompanies()}" />
				<p:ajax process="@this" event="change" update="company"
					partialSubmit="true" />
			</p:selectOneMenu>

			<p:outputLabel
				value="What way would you like to input your locations?" />
			<p:selectOneRadio id="console"
				value="#{flightSearchBean.flight.setAirport}">
				<p:ajax event="change" update="panelA" listener="#{flightSearchBean.flight.emptyCountrySelection()}"/>
				<f:selectItem itemLabel="Departure(and destination) airports"
					itemValue="1" />
				<f:selectItem itemLabel="General region" itemValue="2" />
			</p:selectOneRadio>

			<p:outputLabel value="Departure airport" id="airdeplabel"
				rendered="#{flightSearchBean.flight.inputLocationThroughAirport()}" />
			<h:panelGroup>
				<p:selectOneMenu id="countrydep"
					value="#{flightSearchBean.flight.departure.country}"
					rendered="#{flightSearchBean.flight.inputLocationThroughAirport()}">
					<p:ajax event="change" update="airportdep" />
					<f:selectItem itemLabel="Select Country" itemValue=""
						noSelectionOption="true" />
					<f:selectItems value="#{flightSearchBean.getCountries()}" />
				</p:selectOneMenu>

				<p:selectOneMenu id="airportdep"
					value="#{flightSearchBean.flight.departure.airport}"
					rendered="#{flightSearchBean.flight.inputLocationThroughAirport()}">
					<f:selectItem itemLabel="Select Airport" itemValue=""
						noSelectionOption="true" />
					<f:selectItems
						value="#{flightSearchBean.getAirportsCountry(flightSearchBean.flight.departure.country)}" />
				</p:selectOneMenu>
			</h:panelGroup>

			<p:outputLabel value="Destination airport" id="airdestlabel"
				rendered="#{flightSearchBean.flight.inputLocationThroughAirport()}" />
			<h:panelGroup>
				<p:selectOneMenu id="countrydest"
					value="#{flightSearchBean.flight.destination.country}"
					rendered="#{flightSearchBean.flight.inputLocationThroughAirport()}">
					<p:ajax event="change" update="airportdest" />
					<f:selectItem itemLabel="Select Country" itemValue=""
						noSelectionOption="true" />
					<f:selectItems value="#{flightSearchBean.getCountries()}" />
				</p:selectOneMenu>

				<p:selectOneMenu id="airportdest"
					value="#{flightSearchBean.flight.destination.airport}"
					rendered="#{flightSearchBean.flight.inputLocationThroughAirport()}">
					<f:selectItem itemLabel="Select Airport" itemValue=""
						noSelectionOption="true" />
					<f:selectItems
						value="#{flightSearchBean.getAirportsCountry(flightSearchBean.flight.destination.country)}" />
				</p:selectOneMenu>
			</h:panelGroup>

			<p:outputLabel value="Global Region"
				rendered="#{flightSearchBean.flight.inputLocationThroughGlobalRegion()}" />
			<p:selectOneMenu value="#{flightSearchBean.flight.region}"
				rendered="#{flightSearchBean.flight.inputLocationThroughGlobalRegion()}"
				id="globalregion">
				<f:selectItem itemLabel="Select Region" itemValue=""
					noSelectionOption="true" />
				<f:selectItems
					value="#{flightSearchBean.flight.destination.getRegions()}" />
			</p:selectOneMenu>

			<p:outputLabel for="depdate" value="Departure date" />
			<h:panelGroup>
				<p:calendar id="depdate"
					value="#{flightSearchBean.flight.dateDeparture}">
					<p:ajax process="@this" event="change" update="depdate"
						partialSubmit="true" />
				</p:calendar>
				<p:message for="depdate" />
			</h:panelGroup>

			<p:outputLabel for="destdate" value="Date of Return" />
			<p:calendar id="destdate"
				value="#{flightSearchBean.flight.dateReturn}">
				<p:ajax process="@this" event="change" update="destdate"
					partialSubmit="true" />
			</p:calendar>	
		</p:panelGrid>

		<p:commandButton value="Search flights" action="searchFlights" />
	</h:form>

</h:body>
</html>